% !TeX root = ../main.tex
\chapter{Summary of Discussions and Outlook}
\label{ch:discussion_of_req_n_rq}
In this chapter, the discussions from Ch. \ref{ch:deep_ism_exp} and \ref{ch:deep_ev_isms_as_prior_for_occmaps_exp} are summarized, open questions are discussed based on which, future research directions are being proposed.
%==========================================================================%
%
%==========================================================================%
\section{Discussion of Geo \gls{ilm} and \gls{irm}}
\label{sec:disc_of_geo_ilm_n_irm}
To create the targets for the free, occupied and unknown class to train the deep \gls{ism}s, the usage of occupancy map patches created by accumulating a geo \gls{ilm} over time is proposed. This geo \gls{ilm} needs to only be manually defined and tuned once. Thus, it suffices R\ref{subreq:min_requirements} to minimize manual labor. It is further tuned for the dimensions defined in R\ref{subreq:grid_map_size} so that the map patches as well as all models trained on them meet the requirement. However, since the lidar sensor does not measure motion information, the manually annotated labels for dynamic objects are overlayed. This can be further optimized e.g. by clustering the lidar points and determining the cluster's motion state through radar measurements or by using a Doppler lidar \cite{ma2019moving}.\\
Using the preliminarily tuned geo \gls{ilm} maps as reference, three variants of geo \gls{irm}s are compared to analyze how to enhance the free space prediction coverage without worsening the other classes, as formulated in RQ\ref{requ:fr_space_enrichment}. Here, both adding accumulating detections over time and casting additional free space cones with bigger opening angle lead to improvements consistent over all classes. However, there is still no free space coverage in regions without detections (see Fig. \ref{fig:qual_analysis_of_prior} lower white box of scene A). Hence, further improvements might contain casting free space rays in regions whenever no detections are provided within a certain opening angle.\\
Using the best performing geo \gls{irm} variant as reference, the initially tuned geo \gls{ilm} is analyzed with regards to the best ground-plane-removal technique to provide maximal overlap with the geo \gls{irm}, as formulated in RQ\ref{requ:what_is_best_gt}. Here, removing all street, sidewalk and terrain detections of the lidar sensor provides about the same overlap as a threshold-based removal with a cutoff at $0.5$ meters. To further suffice R\ref{subreq:min_requirements} to use minimal manual labor, the threshold-based removal is being favored.
%==========================================================================%
%
%==========================================================================%
\section{Discussion of deep, evidential \gls{ism}s}
\label{sec:disc_deep_ev_isms}
Given the ground-truth occupancy maps and a reference geo \gls{irm}, the trained \gls{ism} models can be analyzed. Here, deep \gls{cnn}-based models are favored over other machine learning approaches since they have been proven in the literature and in this work to be capable of utilizing large amounts of data, sufficing R\ref{subreq:big_data} use big data. Also, \gls{cnn}s are designed to utilize the spatial coherence in data, which can be seen e.g. in the white box of scene A in Fig. \ref{fig:qual_comp_radar_encoding} where the shape of moving vehicles is being estimated solely on a single detection point and the street layout. Eventually, deep \gls{cnn}s are capable to be trained on multi-class classification tasks, sufficing R\ref{subreq:ev_rep}, thus meeting all the preliminary requirements to chose the model.\\
Given the usage of deep \gls{cnn}s to model the \gls{ism}, an architecture search similar as proposed in \cite{radosavovic2020designing} is performed to answer RQ\ref{requ:network_search} considering the best architecture for the given requirements for input \& ouput dimension R\ref{subreq:grid_map_size} and the requirement for inference speed R\ref{subreq:resource_efficient_inference}. Even though the effects described in \cite{radosavovic2020designing} are verified in the experiments leading to a good trade-off between accuracy and speed, the search is only conducted on a small subset of the proposed parameter range in \cite{radosavovic2020designing}. Also, the search is only conducted for radar inputs $R_1$ since this work focuses on radar \gls{ism}s and it is the most challenging radar input encoding. However, these restrictions might cause limited performance for other sensor modalities or radar encodings. Thus, it might make sense to revisit the architecture search when specifying the deep \gls{ism}s based on other sensors or given other input/outputs dimensions.\\
Next in Sec. \ref{sec:al_uncert_in_deep_isms}, the optimized architecture is used to train three variants of deep \gls{ism}s both on $R_1$ and $R_{20}$ (see definitions in Sec. \ref{subsec:def_of_targets_n_inputs}) to analyze the influence of added information. The first, referred to as SoftNet, is treated as the baseline using a standard softmax activation and cross entropy loss. The results verify the suggested property of SoftNet to model uncertainty between classes by distributing mass to equal portions, as formulated in H\ref{hyp:sota_not_model_unc}. In case of uncertainty between free and occupied class, this leads to assigning conflicting mass violating both R\ref{subreq:unknown_mass} and R\ref{subreq:conflicting_mass}. As a solution, DirNet and ShiftNet are analyzed both using a specific mechanism to identify aleatoric uncertainty and moving it to the unknown class. The results show that indeed both methods are capable of solving the problem to a certain extent, better sufficing the requirement of the unknown mass as inverse measure for information (R\ref{subreq:unknown_mass}) and the conflicting mass being an indicator for dynamic objects (R\ref{subreq:conflicting_mass}). Here, the ShitNet variant is chosen for further considerations since it provided overall better results around the boundaries of occupied areas and higher free space scores.\\
Afterwards in Sec. \ref{sec:analysis_dyn_encoding}, to fully analyze the effects of different radar input encodings, as formulated in RQ\ref{requ:radar_dyn_encoding}, the ShiftNet results for $R_1$ and $R_{20}$ inputs from the uncertainty analysis are further compared with the results of a ShiftNet trained on $R_{20|1}$ inputs (see definitions in Sec. \ref{subsec:def_of_targets_n_inputs}). It can be seen that the scores overall improve in all but the dynamic class by accumulating static detections over time for $R_{20|1}$ as compared to $R_1$. These scores can additionally be improved by accumulating dynamic detections over time with a decay on their intensify, as for $R_{20}$. However, also for $R_{20}$ the quantitative scores suggest an increase of false occupied predictions around a factor of two when comparing $R_{20}$ and $R_{20|1}$ with $R_1$. One potential cause might be the overall increased amount of occupied mass being estimated for $R_{20}$ and $R_{20|1}$ leading to doubling the amount of true occupied mass and therefore also amplifying the mistakes in other classes. Nevertheless, the qualitative results show a clear improvement of overall quality when using the $R_{20}$ encoding which is why it is chosen for further comparisons.\\
To further fully answer RQ\ref{requ:comparison_of_isms} regarding the comparison in performance between deep \gls{ism}s trained on different sensor modalities, ShiftNets trained on different camera encodings and the lidar \gls{bev} projection are compared in Sec. \ref{sec:cam_lidar_fusion_in_deep_isms} with the former results for a ShiftNet trained on $R_{20}$. Regarding the camera encodings, consistent improvement can be seen moving from the homographic RGB \gls{bev} projection over the semantic one to the projection using \gls{monodepth} and height intensities (see further details in Sec. \ref{subsec:def_of_targets_n_inputs} and visualizations in Fig. \ref{fig:icm_qual_comp}). Therefore, the \gls{monodepth}-based encoding is considered for further comparisons. The comparison of the camera encodings might, however, not be fair since some of the transformation for the semantic and \gls{monodepth} inputs is relocated into upstream networks thereby indirectly increasing their respective deep \gls{ism}'s computational capacity compared to directly using the RGB homography as an input. Thus, the RGB homography might be further improved using a bigger network and more data.\\
Moreover, the \gls{monodepth}-based ShiftNet consistently outperforms the one trained on $R_{20}$ for dynamic and free predictions. However, it fails to capture the occupied areas similarly, showing the improvement the measured depth estimates of the radar provide over the estimated ones of the \gls{monodepth} model. Looking at the deep \gls{ilm}, these scores are even further improved. Here, the unknown mass also follows the improvements being consistently overall decreased for better performing models. This shows that the ShiftNet model is indeed capable of utilizing improved sensor information to provide better estimates and further verifies that the unknown mass in ShiftNet can be used as an inverse measure for information, as requested in R\ref{subreq:unknown_mass}.\\ 
Eventually, Sec. \ref{sec:cam_lidar_fusion_in_deep_isms} also provides an analysis of the deep \gls{ism}s capability to utilize information of fused inputs. Here, the fusion of lidar and camera with the radar inputs respectively is being analyzed by concatenating the inputs channel-wise to analyze RQ\ref{requ:comparison_of_isms_fusion}. Again, a consistent improvement can be seen when adding the radar information. Qualitatively, it can be seen that the deep \gls{ism} is capable to pick the best predictions from the respective inputs. An example can be seen in Fig. \ref{fig:icm_qual_comp} scene A, where the fused \gls{ism} uses the better vehicle shape predicted with \gls{monodepth} in the left white box while using the radars improved accuracy at the wall in the lower white box. The only exception to the improvement is the increase of false occupied predictions in the dynamic class. One potential reason might be that in many cases static objects are falsely detected as dynamic (see e.g. orange box for $R_{20}$ of scene B in Fig. \ref{fig:irm_qual_comp}), leading the network to predict an object more often as occupied than dynamic. Here, a further analysis and improvement of the dynamic flag in the radar measurements might improve the predictions for the dynamic class. Furthermore, other means of fusing the inputs by e.g. using completely or partially separate encoders for each sensor modality might lead to further improving the predictions.
%==========================================================================%
%
%==========================================================================%
\section{Discussion of deep, evidential \gls{ism}s in Occupancy Mapping}
\label{sec:disc_deep_ev_isms_in_occ_maps}
For occupancy mapping, it is suggested in H\ref{hyp:temporal_dependence} that the estimates of deep \gls{ism}s contain temporal redundancy which would violate R\ref{subreq:indep_info}. Using the proposed Yager's rule of combination, this might lead to an accumulation of low certain estimates up to the point of full convergence. This phenomenon is investigated in Sec. \ref{sec:exp_analyze_redundant_info} and can be most clearly seen in the occluded areas in Fig. \ref{fig:qual_analysis_of_redundant_info} for the "deep I$R_{20}$M accumulated" results. Also, the fusion with the geo \gls{irm} shows that its influence is completely overwritten by directly fusing it with the deep \gls{irm}, thus, further demonstrating the importance of a solution. To further analyze the cause of the problem, a threshold-based cutoff of low probable estimates is analyzed in the same section. It shows that the accumulation of occupied mass is dampened, proving that the unchecked influence of low certain estimates is indeed one part of the problem.\\
The solution proposed in Sec. \ref{subsec:method_to_use_deep_isms_in_occmaps} uses the difference in unknown mass between the map and the ShiftNet estimates as a measure of mutual information, answering RQ\ref{requ:how_to_meas_redund}. This choice is reasonable since the correlation between information and unknown mass is already established in the deep \gls{ism} analysis. Moreover, the conflict between the map and the estimates shall be added to the difference in information to react to changes in the static world assumption. The sum of the unknown mass difference and the conflicting mass, thus, provides an answer to RQ\ref{requ:how_to_meas_info} on how to define the information content for occupancy mapping. Finally, a discount factor is proposed that maps the sum of unknown mass difference and conflict into a suitable interval in a linear way, providing an answer to RQ\ref{requ:how_to_define_discount_fact}. It shall be mentioned that a further analysis could be beneficial in order to see the influence of varying discount factor definitions to answer RQ\ref{requ:how_to_define_discount_fact} more thoroughly. Also, alternatives to the proposed approach might be to directly train a deep \gls{ism} to only estimate the additional information given a map state or even estimate the next map state directly given different \gls{ism} predictions (e.g. network to predict occupancy state with geo and deep \gls{ism} estimates as input).\\
In order to verify the solution proposed in Sec. \ref{subsec:method_to_use_deep_isms_in_occmaps}, the maps created in Sec. \ref{sec:exp_analyze_redundant_info} are further compared with maps created using the informational discount operation. Here, the property to limit the deep \gls{ism}'s influence can be qualitatively as well as quantitatively seen by the unknown areas being less influential. Also, the qualitative verification in Fig. \ref{fig:viz_mapping_progress} shows that the deep \gls{ism} fusion only affects regions in which unknown mass can be decreased or conflicting mass occurs. However, by restricting the predictions to maximally accumulate to their own certainty, the overall occupancy estimates become less certain also in correct regions. Here, further work has to be done by e.g. adding an additional term into the ShiftNet optimization that increases the mass estimated or using a transformation that dampens the low probability predictions and amplifies the high probable ones.\\
Using the redundancy reduced fusion method, occupancy maps are created and compared with deep \gls{ism}s based on the best performing sensor encodings as analyzed in Ch. \ref{ch:deep_ism_exp} to answer RQ\ref{requ:comp_deep_occ_maps}. The trend of improvement from radar over camera to lidar are also reflected in the mapping results which is to be expected. Again, as for the deep \gls{ism}s, it can be seen that the maps with fused sensor modalities correct errors from both sensors respectively. An example is shown in scene A of Fig. \ref{fig:comparison_of_maps_diff_sens} where the improved shape of the parked cars remains from the camera while the clear separation between the vehicles remains from the radar.\\
Finally, a method is proposed in Sec. \ref{subsec:method_to_use_deep_isms_as_priors_in_occmaps} to use the deep \gls{ism} purely for initialization in the mapping process. Here, the deep \gls{ism}'s unknown mass is restricted to a lower bound which, together with the redundancy removal of Sec. \ref{subsec:method_to_use_deep_isms_in_occmaps}, disables the deep \gls{ism}'s influence once the lower bound has been reached, answering RQ\ref{requ:disable_deep_ism_influence}. Thus, the map is only initially altered by the deep \gls{ism}, which meets R\ref{subreq:initialize_with_deep_ism}, and, afterwards, can only be altered by the geo \gls{ism} which suffices R\ref{subreq:converge_to_geo_ism}. To not only disable the deep \gls{ism} after reaching the lower bound but, additionally, prohibiting it from reducing the map's unknown mass below the lower bound, the discount factor proposed in Sec. \ref{subsec:method_to_use_deep_isms_in_occmaps} is altered.\\
These claims are first verified by simulating the fusion of mass predictions over time for a single occupancy map cell in Sec. \ref{sec:exp_choice_comb_rule} qualitatively showing that the lower bound is met and the information content follows the difference in unknown mass and the conflict. Afterwards, the results are verified qualitatively and quantitatively on real-world data in Sec. \ref{sec:exp_analyze_prior_properties}. It can be seen that the lower bound is met, given a grace interval to account for numerical errors. Also, it can be seen that the proposed approach leads to less falsification of the geo \gls{irm} compared to directly fusing it with the redundancy removed deep \gls{irm} while it is capable to improve the true rates in the formerly unknown areas (see Fig. \ref{tab:quant_analysis_of_prior}). Example cases where errors of the deep \gls{irm} remain in the initialized state and, as such, become distinguishable from the converged areas, verified by the geo \gls{irm}, are shown in Fig. \ref{fig:qual_analysis_of_prior}. These cases further demonstrate the motivation and improvements of the proposed approach.